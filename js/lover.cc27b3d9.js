(function(e){function t(t){for(var r,a,o=t[0],i=t[1],s=t[2],l=0,f=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(u,a)&&u[a]&&f.push(u[a][0]),u[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);d&&d(t);while(f.length)f.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==u[o]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={lover:0},u={lover:0},c=[];function o(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-0063f54f":"86a78559","chunk-2d0e881d":"5f86d255","chunk-2d816923":"96ebeec6","chunk-50e66bcc":"a55da2d3","chunk-58177396":"0c8bcbc0","chunk-8e2780ea":"9f98bffa"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-0063f54f":1,"chunk-2d816923":1,"chunk-50e66bcc":1,"chunk-58177396":1,"chunk-8e2780ea":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0063f54f":"32f67e16","chunk-2d0e881d":"31d6cfe0","chunk-2d816923":"4f857d5d","chunk-50e66bcc":"6ab98d60","chunk-58177396":"08fb4e28","chunk-8e2780ea":"5918d119"}[e]+".css",u=i.p+r,c=document.getElementsByTagName("link"),o=0;o<c.length;o++){var s=c[o],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===u))return t()}var f=document.getElementsByTagName("style");for(o=0;o<f.length;o++){s=f[o],l=s.getAttribute("data-href");if(l===r||l===u)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||u,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete a[e],d.parentNode.removeChild(d),n(c)},d.href=u;var v=document.getElementsByTagName("head")[0];v.appendChild(d)})).then((function(){a[e]=0})));var r=u[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=u[e]=[t,n]}));t.push(r[2]=c);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=o(e);var f=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=u[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",f.name="ChunkLoadError",f.type=r,f.request=a,n[1](f)}u[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://cdn.jx3box.com/static/activity/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var d=l;c.push([1,"chunk-vendors"]),n()})({1:function(e,t,n){e.exports=n("827b")},"827b":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("5c96"),u=n.n(a),c=n("6a69"),o=(n("6b30"),n("c5b4"),n("16e5")),i=n("c14f"),s=n("1da1"),l=(n("14d9"),n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),f=(n("7db0"),n("4e82"),n("e9f5"),n("f665"),n("2f62")),d=n("cc9a"),v=n("ead5"),p=n("c9d2"),m=n("2ef0");r["default"].use(f["a"]);var b=!1,h=!1,g=!1,j=!1,k={state:{events:[],default_event_id:"",event_loading:!1,event:"",slug:"",lover_net:"",join_record:""},getters:{defaultEventSlug:function(e){var t=e.events.find((function(t){return t.id===e.default_event_id}));return t||(t=e.events[0]),t?t.slug:""},currentEvent:function(e){if(e.slug)e.events.find((function(t){return t.slug===e.slug}));return e.events.find((function(t){return t.slug===e.slug}))||""},currentEventId:function(e,t){return t.currentEvent?t.currentEvent.id:""}},mutations:{SET_DEFAULT_LOVER_ID:function(e,t){e.loverId=t},SET_SLUG:function(e,t){e.slug=t},SET_MY_JOIN:function(e,t){e.info.my_join=t},SET_EVENTS:function(e,t){e.events=t},SET_EVENT:function(e,t){e.event=t}},actions:{loadEvents:function(e){return Object(s["a"])(Object(i["a"])().m((function t(){var n,r,a,u;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(n=e.state,r=e.commit,!(n.events.length>0||b)){t.n=1;break}return t.a(2);case 1:return b=!0,t.n=2,Object(v["c"])();case 2:a=t.v,u=a.data.data.list.sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),r("SET_EVENTS",u),console.log("情缘活动列表初始化完成");case 3:return t.a(2)}}),t)})))()},loadDefaultEventId:function(e){return Object(s["a"])(Object(i["a"])().m((function t(){var n,r,a;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(n=e.state,r=e.commit,!n.default_event_id&&!h){t.n=1;break}return t.a(2);case 1:return h=!0,t.n=2,Object(d["b"])("event-lover-id");case 2:a=t.v,r("SET_DEFAULT_LOVER_ID",a),console.log("默认活动加载完毕");case 3:return t.a(2)}}),t)})))()},loadEvent:function(e){return Object(s["a"])(Object(i["a"])().m((function t(){var n,r,a,u,c;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(n=e.commit,r=e.state,a=e.getters,!r.events_loading){t.n=1;break}return t.a(2);case 1:if(r.event.slug!=r.slug){t.n=2;break}return t.a(2);case 2:if(r.slug||(r.slug=a.defaultEventSlug),r.slug){t.n=3;break}return t.a(2);case 3:return r.event_loading=!0,t.p=4,t.n=5,Object(v["b"])(a.currentEventId);case 5:u=t.v,n("SET_EVENT",u.data.data),console.log("情缘活动加载完毕:",u.data.data.slug),t.n=7;break;case 6:t.p=6,c=t.v,console.error("加载活动失败:",c);case 7:return t.p=7,r.event_loading=!1,t.f(7);case 8:return t.a(2)}}),t,null,[[4,6,7,8]])})))()},loadLoverRelationNet:function(e){return Object(s["a"])(Object(i["a"])().m((function t(){var n,r,a,u;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(r=e.state,!g&&!r.lover_net){t.n=1;break}return t.a(2);case 1:if(p["a"].isLogin()){t.n=2;break}return t.a(2);case 2:return g=!0,t.n=3,Object(v["e"])();case 3:a=t.v,u=null===(n=a.data)||void 0===n?void 0:n.data,u.members=Object(m["uniqBy"])(u.members,"user_info.id"),r.lover_net=u,console.log("当前情缘关系加载完毕");case 4:return t.a(2)}}),t)})))()},loadJoinRecord:function(e){var t=arguments;return Object(s["a"])(Object(i["a"])().m((function n(){var r,a,u,c,o,s,l,f,d;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if(r=e.state,a=e.getters,u=t.length>1&&void 0!==t[1]?t[1]:{},c=u.force,c){n.n=4;break}if(p["a"].isLogin()){n.n=1;break}return n.a(2);case 1:if(a.currentEventId){n.n=2;break}return n.a(2);case 2:if(!j){n.n=3;break}return n.a(2);case 3:if((null===(o=r.join_record)||void 0===o?void 0:o.event_id)!=a.currentEventId){n.n=4;break}return n.a(2);case 4:return j=!0,n.p=5,n.n=6,Object(v["f"])(a.currentEventId);case 6:l=n.v,f=null===(s=l.data)||void 0===s?void 0:s.data,f.event_id?(r.join_record=f,console.log("当前报名记录加载完毕")):console.log("当前报名记录加载完毕: 未参赛"),n.n=8;break;case 7:n.p=7,d=n.v,console.error("加载报名记录失败:",d),r.join_record="";case 8:return n.p=8,j=!1,n.f(8);case 9:return n.a(2)}}),n,null,[[5,7,8,9]])})))()}},modules:{}},_=new f["a"].Store(k);r["default"].use(l["a"]);var y=l["a"].prototype.push;l["a"].prototype.push=function(e){return y.call(this,e).catch((function(e){return e}))};var O=function(){return n.e("chunk-0063f54f").then(n.bind(null,"0528"))},E=function(){return n.e("chunk-58177396").then(n.bind(null,"40a4"))},w=function(){return n.e("chunk-8e2780ea").then(n.bind(null,"a68d"))},S=function(){return n.e("chunk-50e66bcc").then(n.bind(null,"06a1"))},T=function(){return n.e("chunk-2d816923").then(n.bind(null,"a923"))},L=function(){return n.e("chunk-2d0e881d").then(n.bind(null,"8a20"))},P=[{name:"index",path:"/",redirect:{name:"info"}},{name:"info",path:"/:slug/info",component:O},{name:"join",path:"/:slug/join",component:E},{name:"vote",path:"/:slug/vote",component:w},{name:"live",path:"/:slug/live",component:S},{name:"process",path:"/:slug/process",component:T},{name:"activity",path:"/:slug/activity",component:L}],I=new l["a"]({mode:"history",base:"/lover",routes:P});I.beforeEach(function(){var e=Object(s["a"])(Object(i["a"])().m((function e(t,n,r){var a;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,Promise.all([_.dispatch("loadDefaultEventId"),_.dispatch("loadEvents"),_.dispatch("loadLoverRelationNet")]);case 1:return e.n=2,Promise.all([_.dispatch("loadEvent",t.params.slug),_.dispatch("loadJoinRecord",t.params.slug)]);case 2:if(t.params.slug){e.n=3;break}if(a=_.getters.defaultEventSlug,!a){e.n=3;break}return r({name:"info",params:{slug:a}}),e.a(2);case 3:r();case 4:return e.a(2)}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());var N=I,x=(n("b0c0"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-lover"},[t("Header"),t("div",{staticClass:"m-lover-kv"},[t("div",{staticClass:"m-menus wp"},[e._l(2,(function(n){return[t("div",{key:n,staticClass:"m-menu"},e._l(e.group(n),(function(n){return t("router-link",{key:n.key,class:["u-menu",{active:n.key==e.page}],attrs:{to:{name:n.key,params:{slug:e.slug}}}},[e._v(" "+e._s(n.name)+" ")])})),1)]}))],2)]),t("router-view"),t("Footer")],1)}),C=[],D=(n("fb6a"),n("65c2")),A={name:"Lover",data:function(){return{menus:[{name:"活动介绍",key:"info"},{name:"报名参赛",key:"join"},{name:"支持投票",key:"vote"},{name:"直播平台",key:"live"},{name:"赛事进程",key:"process"},{name:"相关活动",key:"activity"}]}},provide:{__imgRoot:D["__imgPath"]+"image/lover/"},computed:{page:function(){var e;return null===(e=this.$route)||void 0===e?void 0:e.name},slug:function(){return this.$store.state.slug||this.$store.getters.defaultEventSlug||"?"}},methods:{group:function(e){return this.menus.slice(3*(e-1),3*e)}},watch:{"$route.params.slug":function(e){_.commit("SET_SLUG",e)}}},R=A,V=(n("eb8e"),n("2877")),J=Object(V["a"])(R,x,C,!1,null,null,null),M=J.exports;r["default"].config.productionTip=!1,r["default"].use(u.a),r["default"].use(c["a"]),o["a"].install(r["default"]),new r["default"]({router:N,store:_,render:function(e){return e(M)}}).$mount("#app")},df9e:function(e,t,n){},ead5:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return f})),n.d(t,"j",(function(){return d})),n.d(t,"h",(function(){return v}));n("99af");var r=n("41cb");function a(){return Object(r["a"])().get("/api/cms/user/my/profile")}function u(e){return Object(r["e"])().get("/api/team/pvp-event/public/list")}function c(e){return Object(r["e"])().get("/api/team/pvp-event/public/item/".concat(e))}function o(){return Object(r["e"])().get("/api/team/relation-net/members/by-type/lover")}function i(e,t){return Object(r["e"])().post("/api/team/pvp-event/".concat(e,"/join-record"),t)}function s(e,t){return Object(r["e"])().get("/api/team/pvp-event/".concat(e,"/public/join-record/list"),{params:t})}function l(e){return Object(r["e"])().get("/api/team/pvp-event/".concat(e,"/my/join-record"))}function f(e){return Object(r["e"])().get("/api/team/pvp-event-process/public/list",{params:e})}function d(e,t,n){return Object(r["e"])().post("/api/team/pvp-event/".concat(e,"/public/join-record/item/").concat(t,"/vote"),n)}function v(e,t,n){return Object(r["e"])().get("/api/team/pvp-event/".concat(e,"/public/join-record/item/").concat(t,"/vote/item/").concat(n,"/status"))}},eb8e:function(e,t,n){"use strict";n("df9e")}});