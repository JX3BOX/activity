(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0df29d40"],{"56e2":function(t,n,a){"use strict";a("c162")},aaf1:function(t,n,a){"use strict";a.r(n);a("b0c0"),a("9911");var e=function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-jx3story-main",class:"m-".concat(t.key,"-main")},[n("div",{staticClass:"m-left"},[t._m(0),n("div",{staticClass:"m-tabs"},t._l(t.tabs,(function(a){return n("router-link",{key:a.name,staticClass:"u-router",class:t.key==a.key?"active":"",attrs:{to:a.link}},[n("span",{staticClass:"u-txt"},[t._v(t._s(a.name))])])})),1)]),n("div",{staticClass:"m-main"},[n(t.components[t.key],{tag:"component",attrs:{data:t.componentData}})],1)])},i=[function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-change"},[n("div",{staticClass:"m-change-item"})])}],s=a("5530"),o=(a("4de4"),a("e9f5"),a("910d"),a("d3b7"),a("cc9a")),c=a("01ea"),r=function(){var t=this,n=t._self._c;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-info-content"},[t.content?n("div",{domProps:{innerHTML:t._s(t.content)}}):t.loading?t._e():n("div",{staticClass:"u-null"},[n("img",{attrs:{src:t.data.nullImg}})])])},l=[],u=a("41cb");function d(t){return Object(u["a"])().get("/api/cms/post/".concat(t)).then((function(t){var n,a;return null===t||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.post_content}))}var v={name:"jx3storyInfo",props:{data:{type:Object,default:function(){}}},data:function(){return{loading:!1,content:""}},computed:{ac_id:function(){return this.data.ac_id||""}},watch:{ac_id:{handler:function(t){t&&this.loadInfo(t)},immediate:!0}},methods:{loadInfo:function(t){var n=this;this.loading=!0,d(t).then((function(t){n.content=t})).finally((function(){n.loading=!1}))}}},m=v,f=a("2877"),p=Object(f["a"])(m,r,l,!1,null,null,null),g=p.exports,h=(a("99af"),function(){var t=this,n=t._self._c;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-vote-content"},[t.list.length?n("div",{staticClass:"m-vote-list"},[t._l(t.list,(function(a,e){return n("div",{key:e,staticClass:"m-vote-item",class:{active:a.active}},[n("div",{staticClass:"u-top",style:{paddingTop:a.padding}}),n("div",{staticClass:"u-vote"},[n("span",{staticClass:"u-title"},[t._v(t._s(a.title))]),n("img",{staticClass:"u-icon",attrs:{src:"".concat(t.cdn,"design/event/jx3story/2025/web/").concat(a.active?"active":"vote",".png")},on:{click:function(n){return n.stopPropagation(),t.handleVote(a)}}})])])})),n("div",{staticClass:"u-txt"},[n("span",[t._v("* 点击文章下方的按钮即可参与投票哦")]),n("img",{staticClass:"u-icon",attrs:{src:"".concat(t.cdn,"design/event/jx3story/2025/web/vote.png")}})])],2):t.loading?t._e():n("div",{staticClass:"u-null"},[n("img",{attrs:{src:t.data.nullImg}})])])}),_=[],b=a("c14f"),y=a("1da1"),j=(a("caad"),a("d81d"),a("ab43"),a("2532"),a("fc22")),O=a("2ef0"),w=a("c9d2"),k={name:"jx3storyVote",props:{data:{type:Object,default:function(){}}},data:function(){return{isLogin:w["a"].isLogin(),loading:!1,list:[],cdn:c["d"],lastVoteTime:0}},computed:{vote_id:function(){return this.data.vote_id||""}},watch:{vote_id:{handler:function(t){t&&this.loadVote(t)},immediate:!0}},methods:{loadVote:function(t){var n=this;this.loading=!0,Object(j["b"])(t).then(function(){var a=Object(y["a"])(Object(b["a"])().m((function a(e){var i,o,c,r;return Object(b["a"])().w((function(a){while(1)switch(a.n){case 0:if(c=Object(O["shuffle"])((null===(i=e.data)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.vote_items)||[]),n.list=c.map((function(t){var n=Math.floor(220*Math.random());return Object(s["a"])(Object(s["a"])({},t),{},{padding:"".concat(n,"px")})})),r=n.isLogin,!r){a.n=1;break}return a.n=1,n.loadMyVote(t);case 1:return a.a(2)}}),a)})));return function(t){return a.apply(this,arguments)}}()).finally((function(){n.loading=!1}))},loadMyVote:function(t){var n=this;return Object(y["a"])(Object(b["a"])().m((function a(){var e,i,o,c,r;return Object(b["a"])().w((function(a){while(1)switch(a.n){case 0:return a.n=1,Object(j["a"])(t);case 1:o=a.v,c=(null===(e=o.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.list)||[],r=c.map((function(t){return t.vote_item_id})),n.list=n.list.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{active:r.includes(t.id)})}));case 2:return a.a(2)}}),a)})))()},handleVote:function(t){var n=this;if(!t.active)if(this.isLogin){var a=1e3,e=Date.now();if(e-this.lastVoteTime<a)return this.$message({message:"投票速度太快啦！",type:"warning"});this.lastVoteTime=e,Object(j["f"])(t.program_id,{vote_id_list:[t.id]}).then((function(){n.$message({message:"投票成功",type:"success"}),t.active=!0}))}else w["a"].toLogin()}}},C=k,x=Object(f["a"])(C,h,_,!1,null,null,null),V=x.exports,I=function(){var t=this,n=t._self._c;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-stats-content"},[t.list.length?n("div",{staticClass:"m-list-box"},[n("div",{staticClass:"m-list"},[t._m(0),t._l(t.list,(function(a,e){return n("div",{key:e,staticClass:"m-list-item"},[n("span",[t._v(t._s(e+1))]),n("span",[t._v(t._s(a.title))]),n("span",[t._v(t._s(a.user_info.display_name))]),n("span",[t._v(t._s(a.amount))])])}))],2)]):t.loading?t._e():n("div",{staticClass:"u-null"},[n("img",{attrs:{src:t.data.nullImg}})])])},L=[function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-list-item m-list-item-header"},[n("span",[t._v("序号")]),n("span",[t._v("入选作品")]),n("span",[t._v("作者")]),n("span",[t._v("票数")])])}],M={name:"jx3storyStats",props:{data:{type:Object,default:function(){}}},data:function(){return{loading:!1,list:[]}},computed:{vote_id:function(){return this.data.vote_id||""}},watch:{vote_id:{handler:function(t){t&&this.loadVote(t)},immediate:!0}},methods:{loadVote:function(t){var n=this;this.loading=!0,Object(j["b"])(t).then(function(){var t=Object(y["a"])(Object(b["a"])().m((function t(a){var e,i;return Object(b["a"])().w((function(t){while(1)switch(t.n){case 0:n.list=Object(O["shuffle"])((null===(e=a.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.vote_items)||[]);case 1:return t.a(2)}}),t)})));return function(n){return t.apply(this,arguments)}}()).finally((function(){n.loading=!1}))}}},q=M,T=Object(f["a"])(q,I,L,!1,null,null,null),D=T.exports,N={name:"jx3storyMain",inject:["__imgRoot"],data:function(){return{list:[],year:"2025",tabs:[{name:"返回首页",link:{path:"/"}},{name:"活动介绍",key:"info",link:{path:"/detail",query:{key:"info"}}},{name:"投票赏析",key:"vote",link:{path:"/detail",query:{key:"vote"}}},{name:"票数统计",key:"stats",link:{path:"/detail",query:{key:"stats"}}}],components:{info:g,vote:V,stats:D}}},computed:{key:function(){return this.$route.query.key||"vote"},componentData:function(){var t=this,n=this.list.filter((function(n){return n.year==t.year}))[0]||{};return Object(s["a"])(Object(s["a"])({},n),{},{nullImg:c["d"]+"/design/event/jx3story/2025/web/null.png"})}},mounted:function(){this.load()},methods:{load:function(){var t=this;Object(o["d"])("jx3story_data").then((function(n){t.list=n}))}}},$=N,J=(a("56e2"),Object(f["a"])($,e,i,!1,null,null,null));n["default"]=J.exports},c162:function(t,n,a){},fc22:function(t,n,a){"use strict";a.d(n,"b",(function(){return i})),a.d(n,"c",(function(){return s})),a.d(n,"a",(function(){return o})),a.d(n,"f",(function(){return c})),a.d(n,"d",(function(){return r})),a.d(n,"e",(function(){return l}));a("99af");var e=a("41cb");function i(t){return Object(e["c"])().get("/api/next2/vote-program/program/".concat(t,"/public"))}function s(t,n){return Object(e["c"])().get("/api/next2/vote-program/program/".concat(t,"/public/vote-item/").concat(n))}function o(t){return Object(e["c"])().get("/api/next2/vote-program/program/".concat(t,"/my-vote-history"))}function c(t,n){return Object(e["c"])().post("/api/next2/vote-program/program/".concat(t,"/vote"),n)}function r(t,n){return Object(e["a"])().get("/api/cms/vote/program/item/".concat(t,"/qrcode"),{params:n})}function l(){return Object(e["a"])().get("/api/cms/manage/www/block/load",{params:{slug:"mid_autumn_2024",app:"std"}}).then((function(t){return t.data.data.items}))}}}]);