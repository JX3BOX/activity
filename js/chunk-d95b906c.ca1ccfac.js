(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d95b906c"],{"0105":function(t,e,s){"use strict";s("6b04")},"60dc":function(t,e,s){"use strict";s("de63")},"6a78":function(t,e,s){"use strict";s("7ef6")},"6b04":function(t,e,s){},"7ef6":function(t,e,s){},"81d5":function(t,e,s){"use strict";var a=s("7b0b"),n=s("23cb"),i=s("07fa");t.exports=function(t){var e=a(this),s=i(e),r=arguments.length,c=n(r>1?arguments[1]:void 0,s),l=r>2?arguments[2]:void 0,o=void 0===l?s:n(l,s);while(o>c)e[c++]=t;return e}},"8af8":function(t,e,s){},a923:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-lover-process"},[e("div",{staticClass:"m-page-title"},[e("img",{staticClass:"u-img",attrs:{src:"".concat(t.cdnLink,"/design/event/lover/process/process_title.png")}})]),e("div",{staticClass:"m-process-wrapper"},[t._l([1,2,3,4,5],(function(s){return e("div",{key:s,staticClass:"m-step",class:"m-step-".concat(s)},[e("img",{staticClass:"u-head",attrs:{src:t.headImage[s-1],alt:""}}),e("div",{staticClass:"m-step-battles"},t._l(t.steps[s]||[],(function(s,a){return e("LoverBattleItem",{key:a,staticClass:"m-step-battle",attrs:{process:s},on:{"view-detail":function(e){return t.viewDetail(s)}}})})),1)])})),e("div",{staticClass:"m-step m-step-6"},[e("div",{staticClass:"u-head-empty"}),t.winner?e("div",{staticClass:"m-step-winner"},[e("img",{staticClass:"u-icon",attrs:{src:t.winner.images[0],alt:""}}),e("span",{staticClass:"u-team-name"},[t._v(t._s(t.winner.team_name))]),e("div",{staticClass:"u-user-names"},t._l(t.winner.teammates_info,(function(s,a){return e("span",{key:a,staticClass:"u-user-name"},[t._v(" "+t._s(s.display_name)+" ")])})),0)]):t._e()])],2),e("LoverBattleDetail",{ref:"battle-detail"})],1)},n=[],i=s("5530"),r=s("2909"),c=(s("99af"),s("cb29"),s("65c2")),l=s("ead5"),o=function(){var t,e,s=this,a=s._self._c;return a("div",{staticClass:"m-battle-item"},[a("div",{staticClass:"m-battle-meta"},[s.process?[a("div",{staticClass:"u-status",class:null===(t=s.statusLabel[s.process.status])||void 0===t?void 0:t.class},[s._v(" "+s._s(null===(e=s.statusLabel[s.process.status])||void 0===e?void 0:e.label)+" ")]),a("div",{staticClass:"u-detail-btn",on:{click:s.onViewDetail}},[s._v("详 情")]),a("div",{staticClass:"u-time"},[s._v(s._s(s.process.finish_at))])]:s._e()],2),s._l(s.teams,(function(t,e){return a("div",{key:e,staticClass:"m-battle-team",class:{"is-winner":s.isWinner(t),"is-empty":!t}},[t?[a("img",{staticClass:"u-icon",attrs:{draggable:"false",src:t.images[0],alt:""}}),a("span",{staticClass:"u-name"},[s._v(s._s(t.team_name))]),a("span",{staticClass:"u-win-icon"},[s._v("胜")])]:a("span",{staticClass:"u-empty"},[s._v("虚位以待")])],2)}))],2)},d=[],u={name:"LoverBattleItem",props:{process:{type:[Object,null],default:function(){return{}}}},data:function(){return{statusLabel:{0:{label:"未开始",class:"is-no-start"},1:{label:"进行中",class:"is-in-progress"},2:{label:"已结束",class:"is-ended"}}}},computed:{teams:function(){var t,e;return[(null===(t=this.process)||void 0===t?void 0:t.team1_record)||null,(null===(e=this.process)||void 0===e?void 0:e.team2_record)||null]}},methods:{onViewDetail:function(){this.$emit("view-detail")},isWinner:function(t){return!!t&&this.process.winner_id===t.id}}},m=u,v=(s("0105"),s("2877")),_=Object(v["a"])(m,o,d,!1,null,null,null),p=_.exports,f=function(){var t=this,e=t._self._c;return e("el-dialog",{style:t.containerStyle,attrs:{visible:t.visible,"custom-class":"m-lover-battle-detail__dialog","show-close":!1,"append-to-body":""},scopedSlots:t._u([{key:"title",fn:function(){return[e("el-button",{staticClass:"el-dialog__headerbtn",attrs:{type:"text"},on:{click:function(e){t.visible=!1}}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"19.799",height:"19.799",viewBox:"0 0 19.799 19.799",fill:"none","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M11.314 9.9l8.485-8.486L18.385 0 9.9 8.485 1.414 0 0 1.414 8.485 9.9 0 18.385l1.414 1.414L9.9 11.314l8.485 8.485 1.414-1.414L11.314 9.9z","fill-rule":"evenodd",fill:"#F3C768"}})])])]},proxy:!0}])},[t.renderProcess?e("div",{staticClass:"m-battle-detail"},[e("battle-detail-team",{staticClass:"is-left",attrs:{team:t.renderProcess.team1_record,card:t.cardInfo(t.renderProcess.team1_card)}}),e("div",{staticClass:"m-middle"},[e("img",{staticClass:"u-logo",attrs:{src:"".concat(t.cdnLink,"design/event/lover/battle_lover_logo.webp"),alt:""}}),e("img",{staticClass:"u-vs",attrs:{src:"".concat(t.cdnLink,"design/event/lover/process/vs.png"),alt:""}}),t.renderProcess?e("img",{staticClass:"u-round",attrs:{src:t.headImage[t.renderProcess.round-1],alt:""}}):t._e(),e("span",{staticClass:"u-time"},[t._v(t._s(t.renderProcess.finish_at)+" ")])]),e("battle-detail-team",{attrs:{team:t.renderProcess.team2_record,card:t.cardInfo(t.renderProcess.team2_card)}})],1):t._e()])},b=[],h=(s("7db0"),s("e9f5"),s("f665"),s("d3b7"),s("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-battle-detail-team"},[e("img",{staticClass:"u-team-icon",attrs:{src:t.team.images[0]}}),e("div",{staticClass:"u-team-name"},[t._v(" "+t._s(t.team.team_name)+" ")]),t._l(t.team.teammates_info,(function(s,a){return e("div",{key:a,staticClass:"u-teammate"},[e("img",{staticClass:"u-user-avatar",attrs:{src:t.showAvatar(s.avatar),alt:""}}),e("span",{staticClass:"u-user-name"},[t._v(t._s(s.display_name))])])})),e("div",{staticClass:"u-slogan-title"},[t._v("参赛宣言")]),e("div",{staticClass:"u-slogan"},[t._v(t._s(t.team.slogan||"暂无宣言"))]),e("div",{staticClass:"u-card-title"},[t._v("本场同心天命签：["+t._s(t.card.name||"未抽取")+"]")]),e("div",{staticClass:"u-card-desc"},[t._v(t._s(t.card.desc||"-"))]),e("div",{staticClass:"u-live-btn",class:{"is-disable":!t.team.live_url},attrs:{target:"_blank"},on:{click:t.onGoLive}},[t._v(" "+t._s(t.team.live_url?"进入直播间":"未开播")+" ")])],2)}),g=[],C=s("85e4"),w={name:"LoverBattleDetailTeam",components:{},props:{team:{type:Object,default:function(){return{}}},card:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{},methods:{showAvatar:C["n"],onGoLive:function(){this.team.live_url&&window.open(this.team.live_url,"_blank")}}},L=w,y=(s("e376"),Object(v["a"])(L,h,g,!1,null,"32d0c62c",null)),j=y.exports,k=s("2ef0"),O={name:"LoverBattleDetail",components:{BattleDetailTeam:j},props:{},inject:["cdnLink","headImage"],data:function(){return{visible:!1,process:null,cards:[]}},computed:{currentEvent:function(){return this.$store.state.event},renderProcess:function(){if(!this.process)return null;var t=Object(k["cloneDeep"])(this.process);return t.team1_record=Object(i["a"])(Object(i["a"])({},t.team1_record||{}),{},{teammates_info:t.team1_teammates||[]}),t.team2_record=Object(i["a"])(Object(i["a"])({},t.team2_record||{}),{},{teammates_info:t.team2_teammates||[]}),t},containerStyle:function(){return{"--bg-image":"url(".concat(this.cdnLink,"design/event/lover/battle_detail_bg.webp)")}}},methods:{loadCards:function(){var t=this;Object(l["c"])({_no_page:1,event_id:this.currentEvent.id}).then((function(e){t.cards=e.data.data.list||[]}))},open:function(t){this.visible=!0,this.process=t,console.log("open process",this.process)},cardInfo:function(t){return this.cards.find((function(e){return e.id===t}))||{}}},mounted:function(){this.loadCards()}},I=O,P=(s("6a78"),Object(v["a"])(I,f,b,!1,null,null,null)),x=P.exports,B={name:"LoverProcess",components:{LoverBattleItem:p,LoverBattleDetail:x},data:function(){return{cdnLink:c["__cdn"],process:[],headImage:["".concat(c["__cdn"],"/design/event/lover/process/32_16.png"),"".concat(c["__cdn"],"/design/event/lover/process/16_8.png"),"".concat(c["__cdn"],"/design/event/lover/process/8_4.png"),"".concat(c["__cdn"],"/design/event/lover/process/4_2.png"),"".concat(c["__cdn"],"/design/event/lover/process/2_1.png")]}},provide:function(){return{cdnLink:this.cdnLink,headImage:this.headImage}},computed:{events:function(){return this.$store.state.events},currentEvent:function(){return this.$store.state.event},steps:function(){for(var t=Object(k["groupBy"])(this.process,"round"),e=1;e<=5;e++){t[e]||(t[e]=[]);var s=Math.pow(2,5-e);if(t[e].length<s){var a=Array(s-t[e].length).fill(null);t[e]=[].concat(Object(r["a"])(t[e]),Object(r["a"])(a))}}return t},winner:function(){var t,e=null===(t=this.steps[5])||void 0===t?void 0:t[0];return null!==e&&void 0!==e&&e.winner_id?e.team1_id===e.winner_id?Object(i["a"])(Object(i["a"])({},e.team1_record),{},{teammates_info:e.team1_teammates}):Object(i["a"])(Object(i["a"])({},e.team2_record),{},{teammates_info:e.team2_teammates}):null}},methods:{loadProcess:function(){var t=this;Object(l["l"])({event_id:this.currentEvent.id,round:-1}).then((function(e){t.process=e.data.data||[],console.log("process",t.process)}))},viewDetail:function(t){this.$refs["battle-detail"].open(t)},load:function(){this.loadProcess()}},mounted:function(){this.load()}},D=B,$=(s("60dc"),Object(v["a"])(D,a,n,!1,null,null,null));e["default"]=$.exports},cb29:function(t,e,s){"use strict";var a=s("23e7"),n=s("81d5"),i=s("44d2");a({target:"Array",proto:!0},{fill:n}),i("fill")},de63:function(t,e,s){},e376:function(t,e,s){"use strict";s("8af8")}}]);