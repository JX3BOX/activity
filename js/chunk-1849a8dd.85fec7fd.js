(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1849a8dd"],{"07ac":function(t,a,i){"use strict";var e=i("23e7"),s=i("6f53").values;e({target:"Object",stat:!0},{values:function(t){return s(t)}})},"17ce":function(t,a,i){"use strict";i("582a")},"582a":function(t,a,i){},"6f53":function(t,a,i){"use strict";var e=i("83ab"),s=i("d039"),n=i("e330"),c=i("e163"),r=i("df75"),o=i("fc6a"),u=i("d1e7").f,d=n(u),l=n([].push),m=e&&s((function(){var t=Object.create(null);return t[2]=2,!d(t,2)})),p=function(t){return function(a){var i,s=o(a),n=r(s),u=m&&null===c(s),p=n.length,v=0,g=[];while(p>v)i=n[v++],e&&!(u?i in s:d(s,i))||l(g,t?[i,s[i]]:s[i]);return g}};t.exports={entries:p(!0),values:p(!1)}},b1e1:function(t,a,i){"use strict";i.r(a);i("a4d3"),i("e01a");var e=function(){var t,a,i,e=this,s=e._self._c;return s("div",{staticClass:"p-midautumn-detail"},[s("div",{staticClass:"u-bg",style:e.bgStyle},[s("Nav",{attrs:{poemName:(null===(t=e.poemData)||void 0===t?void 0:t.title)||"",years:e.years},on:{navChange:e.back}}),s("div",{staticClass:"u-main-box"},[s("div",{staticClass:"c-midAutumn-appreciate"},[e.poemData?s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("div",{staticClass:"m-poem-main"},[s("div",{staticClass:"u-back",on:{click:e.back}},[s("i",{staticClass:"el-icon-arrow-left"})]),s("div",{staticClass:"u-author-info"},[s("div",{staticClass:"u-title"},[e._v(e._s(e.poemData.title))]),s("a",{staticClass:"u-user",attrs:{href:"/author/".concat(e.poemData.user_info.id),target:"_blank"}},[e._v(e._s(e.poemData.user_info.display_name))])]),s("div",{staticClass:"u-content"},e._l(e.getText(e.poemData.content,2),(function(t,a){return s("div",{key:a,staticClass:"u-desc-item",class:{warp:t.length>43},domProps:{innerHTML:e._s(t)}})})),0),s("div",{staticClass:"u-title-tips"},[e._v(" "+e._s(e.tips)+" ")])])]):e._e(),s("div",{staticClass:"m-judges"},[s("div",{staticClass:"m-qrcode"},[s("img",{staticClass:"u-img",attrs:{src:"".concat(e.getPic("design/miniprogram/midautumn/code-bg.png?1")),alt:""}}),s("img",{staticClass:"u-qrcode",attrs:{src:e.qrcode,alt:""}})]),s("div",{staticClass:"m-list"},[s("div",{staticClass:"m-tips"},[s("img",{staticClass:"u-icon",attrs:{src:"".concat(e.getPic("design/miniprogram/midautumn/mdi_vote.svg")),alt:""}}),e._m(0)]),null!==(a=e.poemData)&&void 0!==a&&a.sub_title?s("div",{staticClass:"m-tips m-detail",on:{click:e.onDetailClick}},[e._v("查看原帖")]):e._e(),null!==(i=e.poemData)&&void 0!==i&&i.id&&e.judges[e.poemData.id]&&e.judges[e.poemData.id].length?[s("img",{staticClass:"u-judges",attrs:{src:"".concat(e.getPic("design/miniprogram/midautumn/judges.png"))}}),s("div",{staticClass:"m-scrollbar"},e._l(e.judges[e.poemData.id],(function(t,a){return s("div",{key:t.id,staticClass:"m-item"},[s("div",{staticClass:"m-user"},[s("img",{staticClass:"u-avatar",attrs:{src:"".concat(e.getPic("design/miniprogram/midautumn/avatar.png"))}}),s("div",{staticClass:"u-name"},[s("span",[e._v(e._s("评委".concat(a+1)))]),s("span",{staticClass:"u-value"},[e._v("魔盒诗词大会")])])]),s("div",{staticClass:"m-content",style:e.bgStyle},[s("span",{domProps:{innerHTML:e._s(t.description)}})])])})),0)]:e._e()],2)])],1)])],1)])},s=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"u-tips"},[a("div",{staticClass:"u-title"},[t._v("微信扫月亮参与投票↗")]),a("div",{staticClass:"u-desc"},[t._v("有机会赢取故宫中秋好礼！")])])}],n=(i("99af"),i("4de4"),i("7db0"),i("d81d"),i("14d9"),i("13d5"),i("e9f5"),i("910d"),i("f665"),i("7d54"),i("ab43"),i("9485"),i("d3b7"),i("07ac"),i("ac1f"),i("466d"),i("5319"),i("1276"),i("159b"),i("d8d4")),c=i("9642"),r=i("fc22"),o=i("01ea"),u=i("2ef0"),d={props:{years:{type:Array,default:function(){return[]}}},components:{Nav:c["a"]},data:function(){return{poemData:null,tips:"注：图片仅为展示效果，非最终获奖作品",qrcode:"",bgStyle:null,judges:{}}},computed:{year:function(){return this.$route.params.year||(new Date).getFullYear()},poem_id:function(){return this.$route.query.id||0},id:function(){var t,a=this;return(null===(t=this.years.find((function(t){return t.year==a.year})))||void 0===t?void 0:t.vote_id)||0}},watch:{poem_id:{handler:function(t){t&&this.getPoemDetail()},immediate:!0}},methods:{getPoemDetail:function(){var t=this;this.poem_id&&(Object(r["b"])(this.id,this.poem_id).then((function(a){t.poemData=a.data.data,Object(r["c"])(t.poemData.id,{page:"pages/midautumn/poem/poem",program_id:t.poemData.program_id}).then((function(a){var i=o["d"].replace(/\/+$/,"");t.qrcode="".concat(i).concat(a.data.data,"?123")}))})),this.loadJudges())},loadJudges:function(){var t=this;Object(r["d"])().then((function(a){var i=a||[];t.judges=i.filter((function(t){return t.status})).reduce((function(t,a){return t[a.remark]||(t[a.remark]=[]),t[a.remark].push(a),t}),{})}))},getPic:function(t){return"".concat(o["d"]).concat(t)},getText:function(t,a){var i=Object(u["cloneDeep"])(t),e=i.split(/\n/),s=[];return e.forEach((function(t,i){if(t){var e=/https?:\/\/[^"']*\.(?:jpg|jpeg|gif|png)/gi,n=t.match(e);n&&n.forEach((function(i){if(1==a)t=t.replace(i,"");else{var e='<img src="'.concat(i,'" alt="" />');t=t.replace(i,e)}})),s.push(t)}})),s},back:function(){this.$router.go(-1)},getRandomColor:function(){var t=Object.values(n.color).map((function(t){return t.color})),a=Math.floor(Math.random()*t.length),i=t[a]?t[a]:"rgba(23, 36, 58, 0.95)";this.bgStyle="background:linear-gradient(90deg, ".concat(i," 0%, rgba(175, 72, 89, 0) 100%)")},onDetailClick:function(){var t;null!==(t=this.poemData)&&void 0!==t&&t.sub_title&&window.open("/community/".concat(this.poemData.sub_title),"_blank")}}},l=d,m=(i("17ce"),i("2877")),p=Object(m["a"])(l,e,s,!1,null,null,null);a["default"]=p.exports}}]);