(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45c3f698"],{4578:function(t,e,n){"use strict";n("4eb1")},"4eb1":function(t,e,n){},"7ad2":function(t,e,n){"use strict";n("ff56")},d91e:function(t,e,n){},f7a3:function(t,e,n){"use strict";n("d91e")},fe7d:function(t,e,n){"use strict";n.r(e);var a=function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"p-midautumn-detail"},[n("div",{staticClass:"u-bg",style:e.bgStyle},[n("Nav",{attrs:{poemName:(null===(t=e.poemData)||void 0===t?void 0:t.title)||"",years:e.years},on:{navChange:e.back}}),n("div",{staticClass:"u-main-box"},[n("transition",{attrs:{name:"fade",mode:"out-in"}},["intro"===e.achieve_id?n("Introduce",{attrs:{years:e.years}}):e._e(),"poem"===e.achieve_id?n("Poem",{attrs:{years:e.years},on:{poem:e.poem,back:e.back}}):e._e()],1)],1)],1)])},i=[],s=n("9642"),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-midAutumn-introduce"},[e("div",{staticClass:"u-content",domProps:{innerHTML:t._s(t.data)}})])},o=[],u=(n("7db0"),n("e9f5"),n("f665"),n("d3b7"),n("cc9a")),l={components:{},props:{years:{type:Array,default:function(){return[]}}},data:function(){return{data:""}},computed:{year:function(){return this.$route.params.year||(new Date).getFullYear()}},watch:{year:{handler:function(t){var e,n=this,a=(null===(e=this.years.find((function(t){return t.year==n.year})))||void 0===e?void 0:e.intro_id)||0;a&&Object(u["a"])(a).then((function(t){n.data=t}))},immediate:!0}}},c=l,d=(n("7ad2"),n("2877")),f=Object(d["a"])(c,r,o,!1,null,null,null),p=f.exports,h=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"c-midAutumn-appreciate"},[t.list.length||t.loading?t._e():e("div",{staticClass:"u-empty"},[t._v(" 作品收集中，侠士可按照活动介绍中参赛方式前往魔盒网站茶馆论坛处提交作品~ "),t._m(0)]),e("div",{staticClass:"u-list"},t._l(t.list,(function(n,a){return e("div",{key:a,staticClass:"u-item",style:{"background-color":t.getColorStyle(a)},on:{click:function(e){return t.poem(n,a)}}},[e("div",{staticClass:"u-left"},[e("span",{staticClass:"u-text",attrs:{title:n.title}},[t._v(" "+t._s(t.getUserAndTitle(n).length>24?t.getUserAndTitle(n).substring(0,24):t.getUserAndTitle(n))+" "),t.getUserAndTitle(n).length>24&&!t.symbolJudge(t.getUserAndTitle(n))?e("span",{staticClass:"u-more"},[t._v("...")]):t._e()])]),e("div",{staticClass:"u-right"},t._l(t.getText(n.content,1),(function(n,a){return e("span",{key:a},[a<6?e("div",[a<5?e("span",{staticClass:"u-text"},[t._v(t._s(n.length>16?n.substring(0,16):n)+" "),n.length>16&&!t.symbolJudge(n)?e("span",{staticClass:"u-more"},[t._v("...")]):t._e(),n.length<16&&!t.symbolJudge(n)?e("span",[t._v("。")]):t._e()]):t._e(),5==a?e("span",{staticClass:"u-more"},[t._v("...")]):t._e()]):t._e()])})),0)])})),0)])},m=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"u-item"},[e("a",{attrs:{href:"/community?category=诗词",target:"_blank"}},[t._v("快速前往 "),e("i",{staticClass:"el-icon-right"})])])}],v=(n("4de4"),n("caad"),n("14d9"),n("13d5"),n("910d"),n("7d54"),n("9485"),n("ac1f"),n("466d"),n("5319"),n("1276"),n("159b"),n("d8d4")),g=n("fc22"),y=(n("01ea"),n("2ef0")),_={components:{},props:{years:{type:Array,default:function(){return[]}}},data:function(){return{poemData:null,showPoem:!1,achieve_id:null,select_id:null,list:[],tips:"",loading:!1,judges:{},id:0}},computed:{year:function(){return this.$route.params.year||(new Date).getFullYear()}},mounted:function(){var t,e=this;this.loadJudges(),this.id=(null===(t=this.years.find((function(t){return t.year==e.year})))||void 0===t?void 0:t.vote_id)||0,this.load()},methods:{load:function(){var t=this;this.id&&(this.loading=!0,Object(g["a"])(this.id).then((function(e){t.list=Object(y["shuffle"])(e.data.data.vote_items||[]),t.loading=!1})))},loadJudges:function(){var t=this;Object(g["d"])().then((function(e){var n=e||[];t.judges=n.filter((function(t){return t.status})).reduce((function(t,e){return t[e.remark]||(t[e.remark]=[]),t[e.remark].push(e),t}),{})}))},getUserAndTitle:function(t){var e;return((null===(e=t.user_info)||void 0===e?void 0:e.display_name)||"")+"︽"+t.title+"︾"},getTipsText:function(t){var e=(null===t||void 0===t?void 0:t.match(/[\u4e00-\u9fa5]/g))||[];3==e.length?this.tips=e[1]+e[2]:e.length>3?this.tips=e[2]+e[3]:this.tips=t},symbolJudge:function(t){var e=t.substring(0,16).substring(t.substring(0,16).length-1);return["！","？","。","，","︽","︾"].includes(e)},getText:function(t,e){var n=Object(y["cloneDeep"])(t),a=n.split(/\n/),i=[];return a.forEach((function(t,n){if(t){var a=/https?:\/\/[^"']*\.(?:jpg|jpeg|gif|png)/gi,s=t.match(a);s&&s.forEach((function(n){if(1==e)t=t.replace(n,"");else{var a='<img src="'.concat(n,'" alt="" />');t=t.replace(n,a)}})),i.push(t)}})),i},getColorStyle:function(t){var e=v.color;return e[t%e.length].color},poem:function(t){this.$router.push({name:"poem",params:{year:this.year},query:{id:t.id}})}}},b=_,C=(n("4578"),Object(d["a"])(b,h,m,!1,null,null,null)),k=C.exports,T={components:{Nav:s["a"],Introduce:p,Poem:k},props:{years:{type:Array,default:function(){return[]}}},data:function(){return{achieve_id:1,bgStyle:null,poemData:null,article:[],introduce:[]}},watch:{"$route.params":{handler:function(t){this.achieve_id=t.tab,this.$nextTick((function(){var t=document.querySelector(".u-bg");t&&(t.scrollTop=0)}))},immediate:!0}},methods:{poem:function(t){var e;this.poemData=t.item;var n=null!==(e=v.color[t.c])&&void 0!==e&&e.color?"background-color:"+v.color[t.c].color+";opacity: 0.95":"";this.bgStyle=n,this.$nextTick((function(){var t=document.querySelector(".u-bg");t&&(t.scrollTop=0)}))},back:function(){this.poemData=null,this.bgStyle=null}}},j=T,w=(n("f7a3"),Object(d["a"])(j,a,i,!1,null,null,null));e["default"]=w.exports},ff56:function(t,e,n){}}]);