(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a89e8afa"],{"48c5":function(t,n,a){},"54b3":function(t,n,a){},"558b":function(t,n,a){"use strict";a("48c5")},"91dd":function(t,n,a){"use strict";a("54b3")},aaf1:function(t,n,a){"use strict";a.r(n);a("b0c0"),a("9911");var e=function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-jx3story-main",class:["m-".concat(t.key,"-main"),{isMiniProgram:t.isMiniProgram}]},[n("div",{staticClass:"m-left"},[n("div",{staticClass:"m-change"},[n("router-link",{attrs:{to:"/"}},[n("img",{staticClass:"u-logo",attrs:{src:"".concat(t.cdn,"2025/web/logo.png")}})]),n("div",{staticClass:"m-change-item",class:{active:t.changeYear},on:{click:function(n){n.stopPropagation(),t.changeYear=!t.changeYear}}},[n("span",{staticClass:"u-txt"},[t._v(t._s(t.year))]),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.changeYear,expression:"changeYear"}],staticClass:"u-ul"},t._l(t.list,(function(a){return n("li",{key:a.year,on:{click:function(n){return n.stopPropagation(),t.onChange(a.year)}}},[t._v(t._s(a.year))])})),0)])],1),n("div",{staticClass:"m-tabs"},t._l(t.tabs,(function(a){return n("router-link",{key:a.name,staticClass:"u-router",class:t.key==a.key?"active":"",attrs:{to:a.link}},[n("span",{staticClass:"u-txt"},[t._v(t._s(a.name))])])})),1)]),n("router-link",{staticClass:"m-top",attrs:{to:"/"}},[n("span",{staticClass:"u-back"})]),n("div",{staticClass:"m-main"},[n(t.components[t.key],{tag:"component",attrs:{data:t.componentData}})],1)],1)},i=[],s=a("5530"),o=(a("99af"),a("4de4"),a("14d9"),a("e9f5"),a("910d"),a("d3b7"),a("85e4")),c=a("cc9a"),r=a("01ea"),l=function(){var t=this,n=t._self._c;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-info-content"},[t.content?n("div",{domProps:{innerHTML:t._s(t.content)}}):t.loading?t._e():n("div",{staticClass:"u-null"},[n("img",{attrs:{src:t.data.nullImg}})])])},u=[],d=a("41cb");function m(t){return Object(d["a"])().get("/api/cms/post/".concat(t)).then((function(t){var n,a;return null===t||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.post_content}))}var v={name:"jx3storyInfo",props:{data:{type:Object,default:function(){}}},data:function(){return{loading:!1,content:""}},computed:{ac_id:function(){return this.data.ac_id||""}},watch:{ac_id:{handler:function(t){this.content="",t&&this.loadInfo(t)},immediate:!0}},methods:{loadInfo:function(t){var n=this;this.loading=!0,m(t).then((function(t){n.content=t})).finally((function(){n.loading=!1}))}}},f=v,p=(a("558b"),a("2877")),h=Object(p["a"])(f,l,u,!1,null,null,null),g=h.exports,b=function(){var t=this,n=t._self._c;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-vote-content"},[t.list.length?[n("div",{staticClass:"m-vote-list"},t._l(t.list,(function(a,e){return n("div",{key:e,staticClass:"m-vote-item",class:{active:a.active}},[n("div",{staticClass:"u-top",style:{paddingTop:a.padding}}),n("div",{staticClass:"u-vote"},[n("a",{staticClass:"u-title",attrs:{href:"".concat(t.root,"community/").concat(a.content),target:"_blank"}},[t._v(" "+t._s(a.title)+" ")])])])})),0),n("div",{staticClass:"m-mini-box"},[n("div",{staticClass:"m-mini-list"},t._l(t.list,(function(a,e){return n("div",{key:e,staticClass:"m-item"},[n("a",{staticClass:"m-info",attrs:{href:"".concat(t.root,"community/").concat(a.content),target:"_blank"}},[n("span",{staticClass:"u-title"},[t._v(" "+t._s(a.title)+" ")]),n("span",{staticClass:"u-author"},[t._v(" —— "+t._s(a.user_info.display_name)+" ")])]),n("div",{staticClass:"u-vote",class:{active:a.active},on:{click:function(n){return n.stopPropagation(),t.handleVote(a)}}},[t._v(" "+t._s(a.active?"已投票":"投TA一票")+" ")])])})),0)])]:t.loading?t._e():n("div",{staticClass:"u-null"},[n("img",{attrs:{src:t.data.nullImg}})])],2)},y=[],_=a("c14f"),j=a("1da1"),C=(a("caad"),a("d81d"),a("ab43"),a("2532"),a("fc22")),O=a("2ef0"),k=a("c9d2"),w={name:"jx3storyVote",props:{data:{type:Object,default:function(){}}},data:function(){return{isLogin:k["a"].isLogin(),loading:!1,list:[],cdn:r["d"],root:r["c"],lastVoteTime:0}},computed:{vote_id:function(){return this.data.vote_id||""}},watch:{vote_id:{handler:function(t){this.list=[],t&&this.loadVote(t)},immediate:!0}},methods:{loadVote:function(t){var n=this;this.loading=!0,Object(C["b"])(t).then(function(){var a=Object(j["a"])(Object(_["a"])().m((function a(e){var i,o,c,r;return Object(_["a"])().w((function(a){while(1)switch(a.n){case 0:if(c=Object(O["shuffle"])((null===(i=e.data)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.vote_items)||[]),n.list=c.map((function(t){var n=Math.floor(220*Math.random());return Object(s["a"])(Object(s["a"])({},t),{},{padding:"".concat(n,"px")})})),r=n.isLogin,!r){a.n=1;break}return a.n=1,n.loadMyVote(t);case 1:return a.a(2)}}),a)})));return function(t){return a.apply(this,arguments)}}()).finally((function(){n.loading=!1}))},loadMyVote:function(t){var n=this;return Object(j["a"])(Object(_["a"])().m((function a(){var e,i,o,c,r;return Object(_["a"])().w((function(a){while(1)switch(a.n){case 0:return a.n=1,Object(C["a"])(t);case 1:o=a.v,c=(null===(e=o.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.list)||[],r=c.map((function(t){return t.vote_item_id})),n.list=n.list.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{active:r.includes(t.id)})}));case 2:return a.a(2)}}),a)})))()},handleVote:function(t){var n=this;if(!t.active)if(this.isLogin){var a=1e3,e=Date.now();if(e-this.lastVoteTime<a)return this.$message({message:"投票速度太快啦！",type:"warning"});this.lastVoteTime=e,Object(C["f"])(t.program_id,{vote_id_list:[t.id]}).then((function(){n.$message({message:"投票成功",type:"success"}),t.active=!0}))}else k["a"].toLogin()}}},x=w,V=Object(p["a"])(x,b,y,!1,null,null,null),M=V.exports,P=function(){var t=this,n=t._self._c;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-stats-content"},[n("div",{staticClass:"u-null"},[n("img",{attrs:{src:t.cdn+"2025/web/null.png"}})]),(t.list.length,t._e())])},q=[function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-list-item m-list-item-header"},[n("span",{staticClass:"u-number"},[t._v("序号")]),n("span",{staticClass:"u-post"},[t._v(" 入选作品")]),n("span",{staticClass:"u-author"},[t._v("作者")]),n("span",{staticClass:"u-number"},[t._v("票数")])])}],Y={name:"jx3storyStats",props:{data:{type:Object,default:function(){}}},data:function(){return{loading:!1,list:[],root:r["c"],isMiniProgram:Object(o["j"])(),cdn:r["d"]+"design/event/jx3story/"}},computed:{vote_id:function(){return this.data.vote_id||""}},watch:{vote_id:{handler:function(t){this.list=[],t&&this.loadVote(t)},immediate:!0}},methods:{loadVote:function(t){var n=this;this.loading=!0,Object(C["b"])(t).then(function(){var t=Object(j["a"])(Object(_["a"])().m((function t(a){var e,i;return Object(_["a"])().w((function(t){while(1)switch(t.n){case 0:n.list=Object(O["shuffle"])((null===(e=a.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.vote_items)||[]);case 1:return t.a(2)}}),t)})));return function(n){return t.apply(this,arguments)}}()).finally((function(){n.loading=!1}))}}},I=Y,L=Object(p["a"])(I,P,q,!1,null,null,null),T=L.exports,$={name:"jx3storyMain",inject:["__imgRoot"],data:function(){return{list:[],year:"2025",changeYear:!1,isMiniProgram:Object(o["j"])(),cdn:r["d"]+"design/event/jx3story/",tabs:[{name:"活动介绍",key:"info",link:{path:"/detail",query:{key:"info"}}},{name:"入选作品",key:"vote",link:{path:"/detail",query:{key:"vote"}}},{name:"参与投票",key:"stats",link:{path:"/detail",query:{key:"stats"}}}],components:{info:g,vote:M,stats:T}}},computed:{key:function(){return this.$route.query.key||"vote"},componentData:function(){var t=this,n=this.list.filter((function(n){return n.year==t.year}))[0]||{},a=this.isMiniProgram?"mini":"web";return Object(s["a"])(Object(s["a"])({},n),{},{nullImg:"".concat(r["d"],"/design/event/jx3story/2025/").concat(a,"/null.png?").concat(Date.now())})}},watch:{year:function(t,n){this.$router.push({path:"/detail",query:{key:this.key,year:t}})}},mounted:function(){var t=this.$route.query.year||"2025";this.year=t,this.load()},methods:{load:function(){var t=this;Object(c["d"])("jx3story_data").then((function(n){t.list=n}))},onChange:function(t){this.year=t,this.changeYear=!1}}},D=$,N=(a("91dd"),Object(p["a"])(D,e,i,!1,null,null,null));n["default"]=N.exports},fc22:function(t,n,a){"use strict";a.d(n,"b",(function(){return i})),a.d(n,"c",(function(){return s})),a.d(n,"a",(function(){return o})),a.d(n,"f",(function(){return c})),a.d(n,"d",(function(){return r})),a.d(n,"e",(function(){return l}));a("99af");var e=a("41cb");function i(t){return Object(e["c"])().get("/api/next2/vote-program/program/".concat(t,"/public"))}function s(t,n){return Object(e["c"])().get("/api/next2/vote-program/program/".concat(t,"/public/vote-item/").concat(n))}function o(t){return Object(e["c"])().get("/api/next2/vote-program/program/".concat(t,"/my-vote-history"))}function c(t,n){return Object(e["c"])().post("/api/next2/vote-program/program/".concat(t,"/vote"),n)}function r(t,n){return Object(e["a"])().get("/api/cms/vote/program/item/".concat(t,"/qrcode"),{params:n})}function l(){return Object(e["a"])().get("/api/cms/manage/www/block/load",{params:{slug:"mid_autumn_2024",app:"std"}}).then((function(t){return t.data.data.items}))}}}]);