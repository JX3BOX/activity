(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1849a8dd"],{"07ac":function(t,a,e){"use strict";var i=e("23e7"),s=e("6f53").values;i({target:"Object",stat:!0},{values:function(t){return s(t)}})},"17ce":function(t,a,e){"use strict";e("582a")},"582a":function(t,a,e){},"6f53":function(t,a,e){"use strict";var i=e("83ab"),s=e("d039"),n=e("e330"),c=e("e163"),r=e("df75"),o=e("fc6a"),u=e("d1e7").f,d=n(u),l=n([].push),m=i&&s((function(){var t=Object.create(null);return t[2]=2,!d(t,2)})),p=function(t){return function(a){var e,s=o(a),n=r(s),u=m&&null===c(s),p=n.length,v=0,g=[];while(p>v)e=n[v++],i&&!(u?e in s:d(s,e))||l(g,t?[e,s[e]]:s[e]);return g}};t.exports={entries:p(!0),values:p(!1)}},b1e1:function(t,a,e){"use strict";e.r(a);e("a4d3"),e("e01a");var i=function(){var t,a,e,i=this,s=i._self._c;return s("div",{staticClass:"p-midautumn-detail"},[s("div",{staticClass:"u-bg",style:i.bgStyle},[s("Nav",{attrs:{poemName:(null===(t=i.poemData)||void 0===t?void 0:t.title)||"",years:i.years},on:{navChange:i.back}}),s("div",{staticClass:"u-main-box"},[s("div",{staticClass:"c-midAutumn-appreciate"},[i.poemData?s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("div",{staticClass:"m-poem-main"},[s("div",{staticClass:"u-back",on:{click:i.back}},[s("i",{staticClass:"el-icon-arrow-left"})]),s("div",{staticClass:"u-author-info"},[s("div",{staticClass:"u-title"},[i._v(i._s(i.poemData.title))]),s("a",{staticClass:"u-user",attrs:{href:"/author/".concat(i.poemData.user_info.id),target:"_blank"}},[i._v(i._s(i.poemData.user_info.display_name))])]),s("div",{staticClass:"u-content"},i._l(i.getText(i.poemData.content,2),(function(t,a){return s("div",{key:a,staticClass:"u-desc-item",class:{warp:t.length>43},domProps:{innerHTML:i._s(t)}})})),0),s("div",{staticClass:"u-title-tips"},[i._v(" "+i._s(i.tips)+" ")])])]):i._e(),s("div",{staticClass:"m-judges"},[s("div",{staticClass:"m-qrcode"},[s("img",{staticClass:"u-img",attrs:{src:"".concat(i.getPic("design/miniprogram/midautumn/code-bg.png?1")),alt:""}}),s("img",{staticClass:"u-qrcode",attrs:{src:i.qrcode,alt:""}})]),s("div",{staticClass:"m-list"},[s("div",{staticClass:"m-tips"},[s("img",{staticClass:"u-icon",attrs:{src:"".concat(i.getPic("design/miniprogram/midautumn/mdi_vote.svg")),alt:""}}),i._m(0)]),null!==(a=i.poemData)&&void 0!==a&&a.sub_title?s("div",{staticClass:"m-tips m-detail",on:{click:i.onDetailClick}},[i._v("查看原帖")]):i._e(),null!==(e=i.poemData)&&void 0!==e&&e.id&&i.judges[i.poemData.id]&&i.judges[i.poemData.id].length?[s("img",{staticClass:"u-judges",attrs:{src:"".concat(i.getPic("design/miniprogram/midautumn/judges.png"))}}),s("div",{staticClass:"m-scrollbar"},i._l(i.judges[i.poemData.id],(function(t,a){return s("div",{key:t.id,staticClass:"m-item"},[s("div",{staticClass:"m-user"},[s("img",{staticClass:"u-avatar",attrs:{src:"".concat(i.getPic("design/miniprogram/midautumn/avatar.png"))}}),s("div",{staticClass:"u-name"},[s("span",[i._v(i._s("评委".concat(a+1)))]),s("span",{staticClass:"u-value"},[i._v("魔盒诗词大会")])])]),s("div",{staticClass:"m-content",style:i.bgStyle},[s("span",{domProps:{innerHTML:i._s(t.description)}})])])})),0)]:i._e()],2)])],1)])],1)])},s=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"u-tips"},[a("div",{staticClass:"u-title"},[t._v("微信扫月亮参与投票↗")]),a("div",{staticClass:"u-desc"},[t._v("有机会赢取故宫中秋好礼！")])])}],n=(e("99af"),e("4de4"),e("7db0"),e("d81d"),e("14d9"),e("13d5"),e("e9f5"),e("910d"),e("f665"),e("7d54"),e("ab43"),e("9485"),e("d3b7"),e("07ac"),e("ac1f"),e("466d"),e("5319"),e("1276"),e("159b"),e("d8d4")),c=e("9642"),r=e("fc22"),o=e("01ea"),u=e("2ef0"),d={props:{years:{type:Array,default:function(){return[]}}},components:{Nav:c["a"]},data:function(){return{poemData:null,tips:"注：图片仅为展示效果，非最终获奖作品",qrcode:"",bgStyle:null,judges:{}}},computed:{year:function(){return this.$route.params.year||(new Date).getFullYear()},poem_id:function(){return this.$route.query.id||0},id:function(){var t,a=this;return(null===(t=this.years.find((function(t){return t.year==a.year})))||void 0===t?void 0:t.vote_id)||0}},watch:{poem_id:{handler:function(t){t&&this.getPoemDetail()},immediate:!0}},methods:{getPoemDetail:function(){var t=this;this.poem_id&&(Object(r["c"])(this.id,this.poem_id).then((function(a){t.poemData=a.data.data,Object(r["d"])(t.poemData.id,{page:"pages/midautumn/poem/poem",program_id:t.poemData.program_id}).then((function(a){var e=o["d"].replace(/\/+$/,"");t.qrcode="".concat(e).concat(a.data.data,"?123")}))})),this.loadJudges())},loadJudges:function(){var t=this;Object(r["e"])().then((function(a){var e=a||[];t.judges=e.filter((function(t){return t.status})).reduce((function(t,a){return t[a.remark]||(t[a.remark]=[]),t[a.remark].push(a),t}),{})}))},getPic:function(t){return"".concat(o["d"]).concat(t)},getText:function(t,a){var e=Object(u["cloneDeep"])(t),i=e.split(/\n/),s=[];return i.forEach((function(t,e){if(t){var i=/https?:\/\/[^"']*\.(?:jpg|jpeg|gif|png)/gi,n=t.match(i);n&&n.forEach((function(e){if(1==a)t=t.replace(e,"");else{var i='<img src="'.concat(e,'" alt="" />');t=t.replace(e,i)}})),s.push(t)}})),s},back:function(){this.$router.go(-1)},getRandomColor:function(){var t=Object.values(n.color).map((function(t){return t.color})),a=Math.floor(Math.random()*t.length),e=t[a]?t[a]:"rgba(23, 36, 58, 0.95)";this.bgStyle="background:linear-gradient(90deg, ".concat(e," 0%, rgba(175, 72, 89, 0) 100%)")},onDetailClick:function(){var t;null!==(t=this.poemData)&&void 0!==t&&t.sub_title&&window.open("/community/".concat(this.poemData.sub_title),"_blank")}}},l=d,m=(e("17ce"),e("2877")),p=Object(m["a"])(l,i,s,!1,null,null,null);a["default"]=p.exports}}]);